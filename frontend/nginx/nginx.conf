# Generic startup file.
user nginx;
 
#usually equal to number of CPUs you have. run command "grep processor /proc/cpuinfo | wc -l" to find it
worker_processes  auto;
worker_cpu_affinity auto;
 
error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;
 
# Keeps the logs free of messages about not being able to bind().
#daemon     off;
 
events {
    worker_connections  1024;
}
 
http {
#   rewrite_log on;
 
    include mime.types;
    default_type       application/octet-stream;
    access_log         /var/log/nginx/access.log;
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;
    sendfile           on;
#   tcp_nopush         on;
#   tcp_nodelay        on;
    ##
    # Gzip Settings
    ##
    gzip on;
    gzip_disable "msie6";
#   php max upload limit cannot be larger than this       
    index index.php index.html index.htm;

#   snippets 
    include conf.d/snippets/backend-upstream.conf;
    include conf.d/snippets/timeout.conf;
 
#   custom error pages
    error_page 403 /errors/403.html;
    error_page 404 /errors/404.html;
    error_page 410 /errors/410.html;
    error_page 444 /errors/444.html;
    error_page 500 501 502 503 504 /errors/5xx.html;


    include conf.d/*.conf;
}